{"ast":null,"code":"!function (e, n) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? n(exports) : \"function\" == typeof define && define.amd ? define([\"exports\"], n) : n((e = e || self).vkBridge = {});\n}(this, function (e) {\n  \"use strict\";\n\n  var u = function () {\n    return (u = Object.assign || function (e) {\n      for (var n, t = 1, o = arguments.length; t < o; t++) for (var r in n = arguments[t]) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]);\n\n      return e;\n    }).apply(this, arguments);\n  };\n\n  function a() {\n    for (var e = 0, n = 0, t = arguments.length; n < t; n++) e += arguments[n].length;\n\n    var o = Array(e),\n        r = 0;\n\n    for (n = 0; n < t; n++) for (var p = arguments[n], i = 0, u = p.length; i < u; i++, r++) o[r] = p[i];\n\n    return o;\n  }\n\n  function o(p, e) {\n    var o,\n        r,\n        i = (o = {\n      current: 0,\n      next: function () {\n        return ++this.current;\n      }\n    }, r = {}, {\n      add: function (e, n) {\n        var t = null != n ? n : o.next();\n        return r[t] = e, t;\n      },\n      resolve: function (e, n, t) {\n        var o = r[e];\n        o && (t(n) ? o.resolve(n) : o.reject(n), r[e] = null);\n      }\n    });\n    return e(function (e) {\n      if (e.detail && e.detail.data && \"request_id\" in e.detail.data) {\n        var n = e.detail.data,\n            t = n.request_id,\n            o = function (e, n) {\n          var t = {};\n\n          for (var o in e) Object.prototype.hasOwnProperty.call(e, o) && n.indexOf(o) < 0 && (t[o] = e[o]);\n\n          if (null != e && \"function\" == typeof Object.getOwnPropertySymbols) {\n            var r = 0;\n\n            for (o = Object.getOwnPropertySymbols(e); r < o.length; r++) n.indexOf(o[r]) < 0 && Object.prototype.propertyIsEnumerable.call(e, o[r]) && (t[o[r]] = e[o[r]]);\n          }\n\n          return t;\n        }(n, [\"request_id\"]);\n\n        t && i.resolve(t, o, function (e) {\n          return !(\"error_type\" in e);\n        });\n      }\n    }), function (o, r) {\n      return void 0 === r && (r = {}), new Promise(function (e, n) {\n        var t = i.add({\n          resolve: e,\n          reject: n\n        }, r.request_id);\n        p(o, u(u({}, r), {\n          request_id: t\n        }));\n      });\n    };\n  }\n\n  var n = \"undefined\" != typeof window,\n      d = Boolean(n && window.AndroidBridge),\n      s = Boolean(n && window.webkit && window.webkit.messageHandlers && window.webkit.messageHandlers.VKWebAppClose),\n      f = n && !d && !s,\n      t = f && /(^\\?|&)vk_platform=mobile_web(&|$)/.test(location.search),\n      r = f ? \"message\" : \"VKWebAppEvent\",\n      l = a([\"VKWebAppInit\", \"VKWebAppGetCommunityAuthToken\", \"VKWebAppAddToCommunity\", \"VKWebAppAddToHomeScreenInfo\", \"VKWebAppClose\", \"VKWebAppCopyText\", \"VKWebAppGetUserInfo\", \"VKWebAppSetLocation\", \"VKWebAppSendToClient\", \"VKWebAppGetClientVersion\", \"VKWebAppGetPhoneNumber\", \"VKWebAppGetEmail\", \"VKWebAppGetGroupInfo\", \"VKWebAppGetGeodata\", \"VKWebAppGetCommunityToken\", \"VKWebAppSetTitle\", \"VKWebAppGetAuthToken\", \"VKWebAppCallAPIMethod\", \"VKWebAppJoinGroup\", \"VKWebAppLeaveGroup\", \"VKWebAppAllowMessagesFromGroup\", \"VKWebAppDenyNotifications\", \"VKWebAppAllowNotifications\", \"VKWebAppOpenPayForm\", \"VKWebAppOpenApp\", \"VKWebAppShare\", \"VKWebAppShowWallPostBox\", \"VKWebAppScroll\", \"VKWebAppShowOrderBox\", \"VKWebAppShowLeaderBoardBox\", \"VKWebAppShowInviteBox\", \"VKWebAppShowRequestBox\", \"VKWebAppAddToFavorites\", \"VKWebAppShowCommunityWidgetPreviewBox\", \"VKWebAppShowStoryBox\", \"VKWebAppSendToClient\", \"VKWebAppStorageGet\", \"VKWebAppStorageGetKeys\", \"VKWebAppStorageSet\", \"VKWebAppFlashGetInfo\", \"VKWebAppSubscribeStoryApp\"], f && !t ? [\"VKWebAppResizeWindow\", \"VKWebAppAddToMenu\", \"VKWebAppShowSubscriptionBox\", \"VKWebAppShowInstallPushBox\", \"VKWebAppGetFriends\"] : []),\n      b = n ? window.AndroidBridge : void 0,\n      c = s ? window.webkit.messageHandlers : void 0;\n\n  function p(e, n) {\n    var t = n || {\n      bubbles: !1,\n      cancelable: !1,\n      detail: void 0\n    },\n        o = document.createEvent(\"CustomEvent\");\n    return o.initCustomEvent(e, !!t.bubbles, !!t.cancelable, t.detail), o;\n  }\n\n  \"undefined\" == typeof window || window.CustomEvent || (window.CustomEvent = (p.prototype = Event.prototype, p));\n\n  var i = function (t) {\n    var p = void 0,\n        i = [];\n\n    function e(e) {\n      i.push(e);\n    }\n\n    \"undefined\" != typeof window && \"addEventListener\" in window && window.addEventListener(r, function (n) {\n      if (s || d) return a(i).map(function (e) {\n        return e.call(null, n);\n      });\n\n      if (f && n && n.data) {\n        var e = n.data,\n            t = e.type,\n            o = e.data,\n            r = e.frameId;\n        t && \"VKWebAppSettings\" === t ? p = r : a(i).map(function (e) {\n          return e({\n            detail: {\n              type: t,\n              data: o\n            }\n          });\n        });\n      }\n    });\n    var n = o(function (e, n) {\n      b && b[e] ? b[e](JSON.stringify(n)) : c && c[e] && \"function\" == typeof c[e].postMessage ? c[e].postMessage(n) : f && parent.postMessage({\n        handler: e,\n        params: n,\n        type: \"vk-connect\",\n        webFrameId: p,\n        connectVersion: t\n      }, \"*\");\n    }, e);\n    return {\n      send: n,\n      sendPromise: n,\n      subscribe: e,\n      unsubscribe: function (e) {\n        var n = i.indexOf(e);\n        -1 < n && i.splice(n, 1);\n      },\n      supports: function (e) {\n        return d ? !(!b || \"function\" != typeof b[e]) : s ? !(!c || !c[e] || \"function\" != typeof c[e].postMessage) : f && -1 < l.indexOf(e);\n      },\n      isWebView: function () {\n        return s || d;\n      }\n    };\n  }(\"2.2.8\");\n\n  e.applyMiddleware = function e() {\n    for (var o = [], n = 0; n < arguments.length; n++) o[n] = arguments[n];\n\n    return o.includes(void 0) || o.includes(null) ? e.apply(void 0, o.filter(function (e) {\n      return \"function\" == typeof e;\n    })) : function (t) {\n      if (0 === o.length) return t;\n      var e,\n          n = {\n        subscribe: t.subscribe,\n        send: function () {\n          for (var e = [], n = 0; n < arguments.length; n++) e[n] = arguments[n];\n\n          return t.send.apply(t, e);\n        }\n      };\n      return e = o.filter(function (e) {\n        return \"function\" == typeof e;\n      }).map(function (e) {\n        return e(n);\n      }).reduce(function (n, t) {\n        return function (e) {\n          return n(t(e));\n        };\n      })(t.send), u(u({}, t), {\n        send: e\n      });\n    };\n  }, e.default = i, Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  });\n});","map":{"version":3,"sources":["C:/MAMP/htdocs/VK-Apps-Image-Example-master/VK-Apps-Image-Example-master/node_modules/@vkontakte/vk-bridge/dist/index.umd.js"],"names":["e","n","exports","module","define","amd","self","vkBridge","u","Object","assign","t","o","arguments","length","r","prototype","hasOwnProperty","call","apply","a","Array","p","i","current","next","add","resolve","reject","detail","data","request_id","indexOf","getOwnPropertySymbols","propertyIsEnumerable","Promise","window","d","Boolean","AndroidBridge","s","webkit","messageHandlers","VKWebAppClose","f","test","location","search","l","b","c","bubbles","cancelable","document","createEvent","initCustomEvent","CustomEvent","Event","push","addEventListener","map","type","frameId","JSON","stringify","postMessage","parent","handler","params","webFrameId","connectVersion","send","sendPromise","subscribe","unsubscribe","splice","supports","isWebView","applyMiddleware","includes","filter","reduce","default","defineProperty","value"],"mappings":"AAAA,CAAC,UAASA,CAAT,EAAWC,CAAX,EAAa;AAAC,cAAU,OAAOC,OAAjB,IAA0B,eAAa,OAAOC,MAA9C,GAAqDF,CAAC,CAACC,OAAD,CAAtD,GAAgE,cAAY,OAAOE,MAAnB,IAA2BA,MAAM,CAACC,GAAlC,GAAsCD,MAAM,CAAC,CAAC,SAAD,CAAD,EAAaH,CAAb,CAA5C,GAA4DA,CAAC,CAAC,CAACD,CAAC,GAACA,CAAC,IAAEM,IAAN,EAAYC,QAAZ,GAAqB,EAAtB,CAA7H;AAAuJ,CAArK,CAAsK,IAAtK,EAA2K,UAASP,CAAT,EAAW;AAAC;;AAAa,MAAIQ,CAAC,GAAC,YAAU;AAAC,WAAM,CAACA,CAAC,GAACC,MAAM,CAACC,MAAP,IAAe,UAASV,CAAT,EAAW;AAAC,WAAI,IAAIC,CAAJ,EAAMU,CAAC,GAAC,CAAR,EAAUC,CAAC,GAACC,SAAS,CAACC,MAA1B,EAAiCH,CAAC,GAACC,CAAnC,EAAqCD,CAAC,EAAtC,EAAyC,KAAI,IAAII,CAAR,IAAad,CAAC,GAACY,SAAS,CAACF,CAAD,CAAxB,EAA4BF,MAAM,CAACO,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCjB,CAArC,EAAuCc,CAAvC,MAA4Cf,CAAC,CAACe,CAAD,CAAD,GAAKd,CAAC,CAACc,CAAD,CAAlD;;AAAuD,aAAOf,CAAP;AAAS,KAAnK,EAAqKmB,KAArK,CAA2K,IAA3K,EAAgLN,SAAhL,CAAN;AAAiM,GAAlN;;AAAmN,WAASO,CAAT,GAAY;AAAC,SAAI,IAAIpB,CAAC,GAAC,CAAN,EAAQC,CAAC,GAAC,CAAV,EAAYU,CAAC,GAACE,SAAS,CAACC,MAA5B,EAAmCb,CAAC,GAACU,CAArC,EAAuCV,CAAC,EAAxC,EAA2CD,CAAC,IAAEa,SAAS,CAACZ,CAAD,CAAT,CAAaa,MAAhB;;AAAuB,QAAIF,CAAC,GAACS,KAAK,CAACrB,CAAD,CAAX;AAAA,QAAee,CAAC,GAAC,CAAjB;;AAAmB,SAAId,CAAC,GAAC,CAAN,EAAQA,CAAC,GAACU,CAAV,EAAYV,CAAC,EAAb,EAAgB,KAAI,IAAIqB,CAAC,GAACT,SAAS,CAACZ,CAAD,CAAf,EAAmBsB,CAAC,GAAC,CAArB,EAAuBf,CAAC,GAACc,CAAC,CAACR,MAA/B,EAAsCS,CAAC,GAACf,CAAxC,EAA0Ce,CAAC,IAAGR,CAAC,EAA/C,EAAkDH,CAAC,CAACG,CAAD,CAAD,GAAKO,CAAC,CAACC,CAAD,CAAN;;AAAU,WAAOX,CAAP;AAAS;;AAAA,WAASA,CAAT,CAAWU,CAAX,EAAatB,CAAb,EAAe;AAAC,QAAIY,CAAJ;AAAA,QAAMG,CAAN;AAAA,QAAQQ,CAAC,IAAEX,CAAC,GAAC;AAACY,MAAAA,OAAO,EAAC,CAAT;AAAWC,MAAAA,IAAI,EAAC,YAAU;AAAC,eAAM,EAAE,KAAKD,OAAb;AAAqB;AAAhD,KAAF,EAAoDT,CAAC,GAAC,EAAtD,EAAyD;AAACW,MAAAA,GAAG,EAAC,UAAS1B,CAAT,EAAWC,CAAX,EAAa;AAAC,YAAIU,CAAC,GAAC,QAAMV,CAAN,GAAQA,CAAR,GAAUW,CAAC,CAACa,IAAF,EAAhB;AAAyB,eAAOV,CAAC,CAACJ,CAAD,CAAD,GAAKX,CAAL,EAAOW,CAAd;AAAgB,OAA5D;AAA6DgB,MAAAA,OAAO,EAAC,UAAS3B,CAAT,EAAWC,CAAX,EAAaU,CAAb,EAAe;AAAC,YAAIC,CAAC,GAACG,CAAC,CAACf,CAAD,CAAP;AAAWY,QAAAA,CAAC,KAAGD,CAAC,CAACV,CAAD,CAAD,GAAKW,CAAC,CAACe,OAAF,CAAU1B,CAAV,CAAL,GAAkBW,CAAC,CAACgB,MAAF,CAAS3B,CAAT,CAAlB,EAA8Bc,CAAC,CAACf,CAAD,CAAD,GAAK,IAAtC,CAAD;AAA6C;AAA7I,KAA3D,CAAT;AAAoN,WAAOA,CAAC,CAAC,UAASA,CAAT,EAAW;AAAC,UAAGA,CAAC,CAAC6B,MAAF,IAAU7B,CAAC,CAAC6B,MAAF,CAASC,IAAnB,IAAyB,gBAAe9B,CAAC,CAAC6B,MAAF,CAASC,IAApD,EAAyD;AAAC,YAAI7B,CAAC,GAACD,CAAC,CAAC6B,MAAF,CAASC,IAAf;AAAA,YAAoBnB,CAAC,GAACV,CAAC,CAAC8B,UAAxB;AAAA,YAAmCnB,CAAC,GAAC,UAASZ,CAAT,EAAWC,CAAX,EAAa;AAAC,cAAIU,CAAC,GAAC,EAAN;;AAAS,eAAI,IAAIC,CAAR,IAAaZ,CAAb,EAAeS,MAAM,CAACO,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqClB,CAArC,EAAuCY,CAAvC,KAA2CX,CAAC,CAAC+B,OAAF,CAAUpB,CAAV,IAAa,CAAxD,KAA4DD,CAAC,CAACC,CAAD,CAAD,GAAKZ,CAAC,CAACY,CAAD,CAAlE;;AAAuE,cAAG,QAAMZ,CAAN,IAAS,cAAY,OAAOS,MAAM,CAACwB,qBAAtC,EAA4D;AAAC,gBAAIlB,CAAC,GAAC,CAAN;;AAAQ,iBAAIH,CAAC,GAACH,MAAM,CAACwB,qBAAP,CAA6BjC,CAA7B,CAAN,EAAsCe,CAAC,GAACH,CAAC,CAACE,MAA1C,EAAiDC,CAAC,EAAlD,EAAqDd,CAAC,CAAC+B,OAAF,CAAUpB,CAAC,CAACG,CAAD,CAAX,IAAgB,CAAhB,IAAmBN,MAAM,CAACO,SAAP,CAAiBkB,oBAAjB,CAAsChB,IAAtC,CAA2ClB,CAA3C,EAA6CY,CAAC,CAACG,CAAD,CAA9C,CAAnB,KAAwEJ,CAAC,CAACC,CAAC,CAACG,CAAD,CAAF,CAAD,GAAQf,CAAC,CAACY,CAAC,CAACG,CAAD,CAAF,CAAjF;AAAyF;;AAAA,iBAAOJ,CAAP;AAAS,SAAzU,CAA0UV,CAA1U,EAA4U,CAAC,YAAD,CAA5U,CAArC;;AAAiYU,QAAAA,CAAC,IAAEY,CAAC,CAACI,OAAF,CAAUhB,CAAV,EAAYC,CAAZ,EAAc,UAASZ,CAAT,EAAW;AAAC,iBAAM,EAAE,gBAAeA,CAAjB,CAAN;AAA0B,SAApD,CAAH;AAAyD;AAAC,KAAlgB,CAAD,EAAqgB,UAASY,CAAT,EAAWG,CAAX,EAAa;AAAC,aAAO,KAAK,CAAL,KAASA,CAAT,KAAaA,CAAC,GAAC,EAAf,GAAmB,IAAIoB,OAAJ,CAAY,UAASnC,CAAT,EAAWC,CAAX,EAAa;AAAC,YAAIU,CAAC,GAACY,CAAC,CAACG,GAAF,CAAM;AAACC,UAAAA,OAAO,EAAC3B,CAAT;AAAW4B,UAAAA,MAAM,EAAC3B;AAAlB,SAAN,EAA2Bc,CAAC,CAACgB,UAA7B,CAAN;AAA+CT,QAAAA,CAAC,CAACV,CAAD,EAAGJ,CAAC,CAACA,CAAC,CAAC,EAAD,EAAIO,CAAJ,CAAF,EAAS;AAACgB,UAAAA,UAAU,EAACpB;AAAZ,SAAT,CAAJ,CAAD;AAA+B,OAAxG,CAA1B;AAAoI,KAA9pB;AAA+pB;;AAAA,MAAIV,CAAC,GAAC,eAAa,OAAOmC,MAA1B;AAAA,MAAiCC,CAAC,GAACC,OAAO,CAACrC,CAAC,IAAEmC,MAAM,CAACG,aAAX,CAA1C;AAAA,MAAoEC,CAAC,GAACF,OAAO,CAACrC,CAAC,IAAEmC,MAAM,CAACK,MAAV,IAAkBL,MAAM,CAACK,MAAP,CAAcC,eAAhC,IAAiDN,MAAM,CAACK,MAAP,CAAcC,eAAd,CAA8BC,aAAhF,CAA7E;AAAA,MAA4KC,CAAC,GAAC3C,CAAC,IAAE,CAACoC,CAAJ,IAAO,CAACG,CAAtL;AAAA,MAAwL7B,CAAC,GAACiC,CAAC,IAAE,qCAAqCC,IAArC,CAA0CC,QAAQ,CAACC,MAAnD,CAA7L;AAAA,MAAwPhC,CAAC,GAAC6B,CAAC,GAAC,SAAD,GAAW,eAAtQ;AAAA,MAAsRI,CAAC,GAAC5B,CAAC,CAAC,CAAC,cAAD,EAAgB,+BAAhB,EAAgD,wBAAhD,EAAyE,6BAAzE,EAAuG,eAAvG,EAAuH,kBAAvH,EAA0I,qBAA1I,EAAgK,qBAAhK,EAAsL,sBAAtL,EAA6M,0BAA7M,EAAwO,wBAAxO,EAAiQ,kBAAjQ,EAAoR,sBAApR,EAA2S,oBAA3S,EAAgU,2BAAhU,EAA4V,kBAA5V,EAA+W,sBAA/W,EAAsY,uBAAtY,EAA8Z,mBAA9Z,EAAkb,oBAAlb,EAAuc,gCAAvc,EAAwe,2BAAxe,EAAogB,4BAApgB,EAAiiB,qBAAjiB,EAAujB,iBAAvjB,EAAykB,eAAzkB,EAAylB,yBAAzlB,EAAmnB,gBAAnnB,EAAooB,sBAApoB,EAA2pB,4BAA3pB,EAAwrB,uBAAxrB,EAAgtB,wBAAhtB,EAAyuB,wBAAzuB,EAAkwB,uCAAlwB,EAA0yB,sBAA1yB,EAAi0B,sBAAj0B,EAAw1B,oBAAx1B,EAA62B,wBAA72B,EAAs4B,oBAAt4B,EAA25B,sBAA35B,EAAk7B,2BAAl7B,CAAD,EAAg9BwB,CAAC,IAAE,CAACjC,CAAJ,GAAM,CAAC,sBAAD,EAAwB,mBAAxB,EAA4C,6BAA5C,EAA0E,4BAA1E,EAAuG,oBAAvG,CAAN,GAAmI,EAAnlC,CAAzR;AAAA,MAAg3CsC,CAAC,GAAChD,CAAC,GAACmC,MAAM,CAACG,aAAR,GAAsB,KAAK,CAA94C;AAAA,MAAg5CW,CAAC,GAACV,CAAC,GAACJ,MAAM,CAACK,MAAP,CAAcC,eAAf,GAA+B,KAAK,CAAv7C;;AAAy7C,WAASpB,CAAT,CAAWtB,CAAX,EAAaC,CAAb,EAAe;AAAC,QAAIU,CAAC,GAACV,CAAC,IAAE;AAACkD,MAAAA,OAAO,EAAC,CAAC,CAAV;AAAYC,MAAAA,UAAU,EAAC,CAAC,CAAxB;AAA0BvB,MAAAA,MAAM,EAAC,KAAK;AAAtC,KAAT;AAAA,QAAkDjB,CAAC,GAACyC,QAAQ,CAACC,WAAT,CAAqB,aAArB,CAApD;AAAwF,WAAO1C,CAAC,CAAC2C,eAAF,CAAkBvD,CAAlB,EAAoB,CAAC,CAACW,CAAC,CAACwC,OAAxB,EAAgC,CAAC,CAACxC,CAAC,CAACyC,UAApC,EAA+CzC,CAAC,CAACkB,MAAjD,GAAyDjB,CAAhE;AAAkE;;AAAA,iBAAa,OAAOwB,MAApB,IAA4BA,MAAM,CAACoB,WAAnC,KAAiDpB,MAAM,CAACoB,WAAP,IAAoBlC,CAAC,CAACN,SAAF,GAAYyC,KAAK,CAACzC,SAAlB,EAA4BM,CAAhD,CAAjD;;AAAqG,MAAIC,CAAC,GAAC,UAASZ,CAAT,EAAW;AAAC,QAAIW,CAAC,GAAC,KAAK,CAAX;AAAA,QAAaC,CAAC,GAAC,EAAf;;AAAkB,aAASvB,CAAT,CAAWA,CAAX,EAAa;AAACuB,MAAAA,CAAC,CAACmC,IAAF,CAAO1D,CAAP;AAAU;;AAAA,mBAAa,OAAOoC,MAApB,IAA4B,sBAAqBA,MAAjD,IAAyDA,MAAM,CAACuB,gBAAP,CAAwB5C,CAAxB,EAA0B,UAASd,CAAT,EAAW;AAAC,UAAGuC,CAAC,IAAEH,CAAN,EAAQ,OAAOjB,CAAC,CAACG,CAAD,CAAD,CAAKqC,GAAL,CAAS,UAAS5D,CAAT,EAAW;AAAC,eAAOA,CAAC,CAACkB,IAAF,CAAO,IAAP,EAAYjB,CAAZ,CAAP;AAAsB,OAA3C,CAAP;;AAAoD,UAAG2C,CAAC,IAAE3C,CAAH,IAAMA,CAAC,CAAC6B,IAAX,EAAgB;AAAC,YAAI9B,CAAC,GAACC,CAAC,CAAC6B,IAAR;AAAA,YAAanB,CAAC,GAACX,CAAC,CAAC6D,IAAjB;AAAA,YAAsBjD,CAAC,GAACZ,CAAC,CAAC8B,IAA1B;AAAA,YAA+Bf,CAAC,GAACf,CAAC,CAAC8D,OAAnC;AAA2CnD,QAAAA,CAAC,IAAE,uBAAqBA,CAAxB,GAA0BW,CAAC,GAACP,CAA5B,GAA8BK,CAAC,CAACG,CAAD,CAAD,CAAKqC,GAAL,CAAS,UAAS5D,CAAT,EAAW;AAAC,iBAAOA,CAAC,CAAC;AAAC6B,YAAAA,MAAM,EAAC;AAACgC,cAAAA,IAAI,EAAClD,CAAN;AAAQmB,cAAAA,IAAI,EAAClB;AAAb;AAAR,WAAD,CAAR;AAAmC,SAAxD,CAA9B;AAAwF;AAAC,KAAvP,CAAzD;AAAkT,QAAIX,CAAC,GAACW,CAAC,CAAC,UAASZ,CAAT,EAAWC,CAAX,EAAa;AAACgD,MAAAA,CAAC,IAAEA,CAAC,CAACjD,CAAD,CAAJ,GAAQiD,CAAC,CAACjD,CAAD,CAAD,CAAK+D,IAAI,CAACC,SAAL,CAAe/D,CAAf,CAAL,CAAR,GAAgCiD,CAAC,IAAEA,CAAC,CAAClD,CAAD,CAAJ,IAAS,cAAY,OAAOkD,CAAC,CAAClD,CAAD,CAAD,CAAKiE,WAAjC,GAA6Cf,CAAC,CAAClD,CAAD,CAAD,CAAKiE,WAAL,CAAiBhE,CAAjB,CAA7C,GAAiE2C,CAAC,IAAEsB,MAAM,CAACD,WAAP,CAAmB;AAACE,QAAAA,OAAO,EAACnE,CAAT;AAAWoE,QAAAA,MAAM,EAACnE,CAAlB;AAAoB4D,QAAAA,IAAI,EAAC,YAAzB;AAAsCQ,QAAAA,UAAU,EAAC/C,CAAjD;AAAmDgD,QAAAA,cAAc,EAAC3D;AAAlE,OAAnB,EAAwF,GAAxF,CAApG;AAAiM,KAAhN,EAAiNX,CAAjN,CAAP;AAA2N,WAAM;AAACuE,MAAAA,IAAI,EAACtE,CAAN;AAAQuE,MAAAA,WAAW,EAACvE,CAApB;AAAsBwE,MAAAA,SAAS,EAACzE,CAAhC;AAAkC0E,MAAAA,WAAW,EAAC,UAAS1E,CAAT,EAAW;AAAC,YAAIC,CAAC,GAACsB,CAAC,CAACS,OAAF,CAAUhC,CAAV,CAAN;AAAmB,SAAC,CAAD,GAAGC,CAAH,IAAMsB,CAAC,CAACoD,MAAF,CAAS1E,CAAT,EAAW,CAAX,CAAN;AAAoB,OAAjG;AAAkG2E,MAAAA,QAAQ,EAAC,UAAS5E,CAAT,EAAW;AAAC,eAAOqC,CAAC,GAAC,EAAE,CAACY,CAAD,IAAI,cAAY,OAAOA,CAAC,CAACjD,CAAD,CAA1B,CAAD,GAAgCwC,CAAC,GAAC,EAAE,CAACU,CAAD,IAAI,CAACA,CAAC,CAAClD,CAAD,CAAN,IAAW,cAAY,OAAOkD,CAAC,CAAClD,CAAD,CAAD,CAAKiE,WAArC,CAAD,GAAmDrB,CAAC,IAAE,CAAC,CAAD,GAAGI,CAAC,CAAChB,OAAF,CAAUhC,CAAV,CAAlG;AAA+G,OAAtO;AAAuO6E,MAAAA,SAAS,EAAC,YAAU;AAAC,eAAOrC,CAAC,IAAEH,CAAV;AAAY;AAAxQ,KAAN;AAAgR,GAAn1B,CAAo1B,OAAp1B,CAAN;;AAAm2BrC,EAAAA,CAAC,CAAC8E,eAAF,GAAkB,SAAS9E,CAAT,GAAY;AAAC,SAAI,IAAIY,CAAC,GAAC,EAAN,EAASX,CAAC,GAAC,CAAf,EAAiBA,CAAC,GAACY,SAAS,CAACC,MAA7B,EAAoCb,CAAC,EAArC,EAAwCW,CAAC,CAACX,CAAD,CAAD,GAAKY,SAAS,CAACZ,CAAD,CAAd;;AAAkB,WAAOW,CAAC,CAACmE,QAAF,CAAW,KAAK,CAAhB,KAAoBnE,CAAC,CAACmE,QAAF,CAAW,IAAX,CAApB,GAAqC/E,CAAC,CAACmB,KAAF,CAAQ,KAAK,CAAb,EAAeP,CAAC,CAACoE,MAAF,CAAS,UAAShF,CAAT,EAAW;AAAC,aAAM,cAAY,OAAOA,CAAzB;AAA2B,KAAhD,CAAf,CAArC,GAAuG,UAASW,CAAT,EAAW;AAAC,UAAG,MAAIC,CAAC,CAACE,MAAT,EAAgB,OAAOH,CAAP;AAAS,UAAIX,CAAJ;AAAA,UAAMC,CAAC,GAAC;AAACwE,QAAAA,SAAS,EAAC9D,CAAC,CAAC8D,SAAb;AAAuBF,QAAAA,IAAI,EAAC,YAAU;AAAC,eAAI,IAAIvE,CAAC,GAAC,EAAN,EAASC,CAAC,GAAC,CAAf,EAAiBA,CAAC,GAACY,SAAS,CAACC,MAA7B,EAAoCb,CAAC,EAArC,EAAwCD,CAAC,CAACC,CAAD,CAAD,GAAKY,SAAS,CAACZ,CAAD,CAAd;;AAAkB,iBAAOU,CAAC,CAAC4D,IAAF,CAAOpD,KAAP,CAAaR,CAAb,EAAeX,CAAf,CAAP;AAAyB;AAA1H,OAAR;AAAoI,aAAOA,CAAC,GAACY,CAAC,CAACoE,MAAF,CAAS,UAAShF,CAAT,EAAW;AAAC,eAAM,cAAY,OAAOA,CAAzB;AAA2B,OAAhD,EAAkD4D,GAAlD,CAAsD,UAAS5D,CAAT,EAAW;AAAC,eAAOA,CAAC,CAACC,CAAD,CAAR;AAAY,OAA9E,EAAgFgF,MAAhF,CAAuF,UAAShF,CAAT,EAAWU,CAAX,EAAa;AAAC,eAAO,UAASX,CAAT,EAAW;AAAC,iBAAOC,CAAC,CAACU,CAAC,CAACX,CAAD,CAAF,CAAR;AAAe,SAAlC;AAAmC,OAAxI,EAA0IW,CAAC,CAAC4D,IAA5I,CAAF,EAAoJ/D,CAAC,CAACA,CAAC,CAAC,EAAD,EAAIG,CAAJ,CAAF,EAAS;AAAC4D,QAAAA,IAAI,EAACvE;AAAN,OAAT,CAA5J;AAA+K,KAAtc;AAAuc,GAAhiB,EAAiiBA,CAAC,CAACkF,OAAF,GAAU3D,CAA3iB,EAA6iBd,MAAM,CAAC0E,cAAP,CAAsBnF,CAAtB,EAAwB,YAAxB,EAAqC;AAACoF,IAAAA,KAAK,EAAC,CAAC;AAAR,GAArC,CAA7iB;AAA8lB,CAA1lJ,CAAD","sourcesContent":["!function(e,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?n(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],n):n((e=e||self).vkBridge={})}(this,function(e){\"use strict\";var u=function(){return(u=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)};function a(){for(var e=0,n=0,t=arguments.length;n<t;n++)e+=arguments[n].length;var o=Array(e),r=0;for(n=0;n<t;n++)for(var p=arguments[n],i=0,u=p.length;i<u;i++,r++)o[r]=p[i];return o}function o(p,e){var o,r,i=(o={current:0,next:function(){return++this.current}},r={},{add:function(e,n){var t=null!=n?n:o.next();return r[t]=e,t},resolve:function(e,n,t){var o=r[e];o&&(t(n)?o.resolve(n):o.reject(n),r[e]=null)}});return e(function(e){if(e.detail&&e.detail.data&&\"request_id\"in e.detail.data){var n=e.detail.data,t=n.request_id,o=function(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)n.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(t[o[r]]=e[o[r]])}return t}(n,[\"request_id\"]);t&&i.resolve(t,o,function(e){return!(\"error_type\"in e)})}}),function(o,r){return void 0===r&&(r={}),new Promise(function(e,n){var t=i.add({resolve:e,reject:n},r.request_id);p(o,u(u({},r),{request_id:t}))})}}var n=\"undefined\"!=typeof window,d=Boolean(n&&window.AndroidBridge),s=Boolean(n&&window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.VKWebAppClose),f=n&&!d&&!s,t=f&&/(^\\?|&)vk_platform=mobile_web(&|$)/.test(location.search),r=f?\"message\":\"VKWebAppEvent\",l=a([\"VKWebAppInit\",\"VKWebAppGetCommunityAuthToken\",\"VKWebAppAddToCommunity\",\"VKWebAppAddToHomeScreenInfo\",\"VKWebAppClose\",\"VKWebAppCopyText\",\"VKWebAppGetUserInfo\",\"VKWebAppSetLocation\",\"VKWebAppSendToClient\",\"VKWebAppGetClientVersion\",\"VKWebAppGetPhoneNumber\",\"VKWebAppGetEmail\",\"VKWebAppGetGroupInfo\",\"VKWebAppGetGeodata\",\"VKWebAppGetCommunityToken\",\"VKWebAppSetTitle\",\"VKWebAppGetAuthToken\",\"VKWebAppCallAPIMethod\",\"VKWebAppJoinGroup\",\"VKWebAppLeaveGroup\",\"VKWebAppAllowMessagesFromGroup\",\"VKWebAppDenyNotifications\",\"VKWebAppAllowNotifications\",\"VKWebAppOpenPayForm\",\"VKWebAppOpenApp\",\"VKWebAppShare\",\"VKWebAppShowWallPostBox\",\"VKWebAppScroll\",\"VKWebAppShowOrderBox\",\"VKWebAppShowLeaderBoardBox\",\"VKWebAppShowInviteBox\",\"VKWebAppShowRequestBox\",\"VKWebAppAddToFavorites\",\"VKWebAppShowCommunityWidgetPreviewBox\",\"VKWebAppShowStoryBox\",\"VKWebAppSendToClient\",\"VKWebAppStorageGet\",\"VKWebAppStorageGetKeys\",\"VKWebAppStorageSet\",\"VKWebAppFlashGetInfo\",\"VKWebAppSubscribeStoryApp\"],f&&!t?[\"VKWebAppResizeWindow\",\"VKWebAppAddToMenu\",\"VKWebAppShowSubscriptionBox\",\"VKWebAppShowInstallPushBox\",\"VKWebAppGetFriends\"]:[]),b=n?window.AndroidBridge:void 0,c=s?window.webkit.messageHandlers:void 0;function p(e,n){var t=n||{bubbles:!1,cancelable:!1,detail:void 0},o=document.createEvent(\"CustomEvent\");return o.initCustomEvent(e,!!t.bubbles,!!t.cancelable,t.detail),o}\"undefined\"==typeof window||window.CustomEvent||(window.CustomEvent=(p.prototype=Event.prototype,p));var i=function(t){var p=void 0,i=[];function e(e){i.push(e)}\"undefined\"!=typeof window&&\"addEventListener\"in window&&window.addEventListener(r,function(n){if(s||d)return a(i).map(function(e){return e.call(null,n)});if(f&&n&&n.data){var e=n.data,t=e.type,o=e.data,r=e.frameId;t&&\"VKWebAppSettings\"===t?p=r:a(i).map(function(e){return e({detail:{type:t,data:o}})})}});var n=o(function(e,n){b&&b[e]?b[e](JSON.stringify(n)):c&&c[e]&&\"function\"==typeof c[e].postMessage?c[e].postMessage(n):f&&parent.postMessage({handler:e,params:n,type:\"vk-connect\",webFrameId:p,connectVersion:t},\"*\")},e);return{send:n,sendPromise:n,subscribe:e,unsubscribe:function(e){var n=i.indexOf(e);-1<n&&i.splice(n,1)},supports:function(e){return d?!(!b||\"function\"!=typeof b[e]):s?!(!c||!c[e]||\"function\"!=typeof c[e].postMessage):f&&-1<l.indexOf(e)},isWebView:function(){return s||d}}}(\"2.2.8\");e.applyMiddleware=function e(){for(var o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];return o.includes(void 0)||o.includes(null)?e.apply(void 0,o.filter(function(e){return\"function\"==typeof e})):function(t){if(0===o.length)return t;var e,n={subscribe:t.subscribe,send:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.send.apply(t,e)}};return e=o.filter(function(e){return\"function\"==typeof e}).map(function(e){return e(n)}).reduce(function(n,t){return function(e){return n(t(e))}})(t.send),u(u({},t),{send:e})}},e.default=i,Object.defineProperty(e,\"__esModule\",{value:!0})});\n"]},"metadata":{},"sourceType":"script"}